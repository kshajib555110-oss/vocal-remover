<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cms Partner Portal Database</title>
  <style>
    :root{
      --bg:#eef2f6;
      --panel:#ffffff;
      --text:#0f172a;
      --muted:#526277;
      --line:#d7e0ee;

      --nav:#0b2a52;
      --nav2:#081f3b;
      --navText:#eaf2ff;

      --accent:#0b5ed7;
      --accent2:#0a4cb1;

      --dangerBg:#fff5f4;
      --dangerLine:#ffd0cc;
      --dangerText:#7a1b12;

      --shadow: 0 10px 30px rgba(2, 8, 23, .08);
      --shadow2: 0 16px 60px rgba(2, 8, 23, .18);

      --r14:14px;
      --r16:16px;
      --r18:18px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --font: ui-sans-serif, gov-system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:var(--font);background:var(--bg);color:var(--text)}

    .app{min-height:100vh;display:grid;grid-template-columns:288px 1fr}
    @media (max-width:980px){.app{grid-template-columns:1fr}.sidebar{display:none}}

    .sidebar{
      background:linear-gradient(180deg,var(--nav),var(--nav2));
      color:var(--navText);
      padding:16px 14px;
      border-right:1px solid rgba(255,255,255,.12);
      position:sticky;top:0;height:100vh;overflow:auto
    }
    .sb-brand{display:flex;gap:12px;align-items:center;padding:10px 10px 14px;border-bottom:1px solid rgba(255,255,255,.14);margin-bottom:12px}
    .sb-logo{
      width:42px;height:42px;border-radius:12px;display:grid;place-items:center;
      background:rgba(255,255,255,.14);border:1px solid rgba(255,255,255,.18);
      font-weight:1000;letter-spacing:.6px;box-shadow:inset 0 10px 20px rgba(0,0,0,.14)
    }
    .sb-title{font-weight:1000;font-size:14px;line-height:1.1}
    .sb-sub{font-size:11px;opacity:.86;margin-top:2px}

    .sb-block{margin-top:12px;padding:0 6px}
    .sb-block h4{margin:10px 0 8px;font-size:11px;letter-spacing:.6px;text-transform:uppercase;opacity:.78}
    .sb-link{
      width:100%;display:flex;align-items:center;justify-content:space-between;gap:10px;
      border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);
      color:var(--navText);padding:10px;border-radius:12px;cursor:pointer;
      font-weight:900;font-size:12.5px;text-align:left;margin-bottom:8px
    }
    .sb-link:hover{background:rgba(255,255,255,.10)}

    .main{min-height:100vh;display:flex;flex-direction:column}

    .topbar{
      background:#ffffff89;border-bottom:1px solid var(--line);
      box-shadow:0 6px 18px rgba(2,8,23,.05);
      padding:12px 16px;display:flex;justify-content:space-between;align-items:center;gap:12px;
      position:sticky;top:0;z-index:20
    }
    .crumb{min-width:0;display:flex;flex-direction:column;gap:2px}
    .crumb .path{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .crumb .title{font-weight:1000;font-size:15px;letter-spacing:.2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .top-actions{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}
    .pill{display:flex;gap:8px;align-items:center;background:#f1f5f9;border:1px solid var(--line);padding:8px 10px;border-radius:999px;font-size:12px;max-width:55vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
    .btn{border:none;border-radius:12px;padding:10px 12px;cursor:pointer;font-weight:1000;font-size:12.5px;transition:.15s}
    .btn:active{transform:translateY(1px)}
    .btn-primary{background:linear-gradient(180deg,var(--accent),var(--accent2));color:#fff;box-shadow:0 10px 22px rgba(11,94,215,.22)}
    .btn-outline{background:#fff;color:var(--accent);border:1px solid #bcd0ff}
    .btn-danger{background:#b42318;color:#fff;box-shadow:0 10px 22px rgba(180,35,24,.18)}

    .content{padding:16px;display:grid;gap:14px;max-width:1250px}

    .card{background:var(--panel);border:1px solid var(--line);border-radius:var(--r16);box-shadow:var(--shadow);overflow:hidden}
    .card-h{padding:14px 16px;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;align-items:center;gap:10px}
    .card-h h3{margin:0;font-size:14px;font-weight:1000}
    .card-h p{margin:0;font-size:12px;color:var(--muted)}
    .card-b{padding:16px}

    label{font-size:12px;font-weight:900;color:var(--muted)}
    input,select,textarea{
      width:100%;padding:11px 12px;border:1px solid var(--line);
      border-radius:12px;outline:none;background:#fff;font-family:var(--font)
    }
    textarea{min-height:90px;resize:vertical}
    input:focus,select:focus,textarea:focus{border-color:#93fddf;box-shadow:0 0 0 3px rgba(11,94,215,.12)}
    .form{display:grid;gap:10px;margin-top:10px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:640px){.row{grid-template-columns:1fr}}

    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{border:1px solid var(--line);background:#f8fafc;padding:9px 10px;border-radius:999px;cursor:pointer;font-weight:1000;font-size:12px}
    .tab.active{background:#e8f0ff;border-color:#bfd6ff;color:var(--accent)}

    .tiles{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media (max-width:1100px){.tiles{grid-template-columns:1fr}}
    .tile{border-radius:18px;border:1px solid var(--line);background:linear-gradient(180deg,#fff,#f7fbff);box-shadow:var(--shadow);overflow:hidden}
    .tile-top{padding:14px 14px 10px;display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .tile-title{margin:0;font-weight:1000;font-size:14px;line-height:1.25}
    .tile-sub{margin-top:2px;font-size:12px;color:var(--muted)}
    .chip{font-size:11px;font-weight:1000;background:#e8f0ff;color:var(--accent);border:1px solid #bfd8ff;padding:6px 9px;border-radius:999px;white-space:nowrap}
    .tile-body{padding:0 14px 14px}
    .menu{display:grid;gap:8px;margin-top:10px}
    .menu button{
      width:100%;text-align:left;padding:11px 12px;border:1px solid var(--line);background:#fff;border-radius:12px;
      cursor:pointer;font-weight:1000;font-size:12.5px;display:flex;justify-content:space-between;align-items:center;gap:10px
    }
    .menu button:hover{border-color:#bcd0ff}
    .chev{opacity:.55}

    .pagebar{
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:12px 14px;border:1px solid var(--line);border-radius:14px;background:#ffffff;
      box-shadow:0 10px 22px rgba(2,8,23,.06);
    }
    .pagebar .left{display:flex;flex-direction:column;gap:2px}
    .pagebar .left b{font-weight:1000}
    .pagebar .left small{color:var(--muted);font-size:12px}
    .pagebar .right{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}

    .view{display:none}
    .view.active{display:block}

    /* Notice modal */
    .modal-bg{position:fixed;inset:0;background:rgba(2,8,23,.55);display:none;align-items:center;justify-content:center;padding:18px;z-index:9999}
    .modal{width:min(560px,100%);background:#fff;border-radius:18px;border:1px solid rgba(255,255,255,.25);box-shadow:var(--shadow2);overflow:hidden}
    .modal-h{padding:14px 16px;border-bottom:1px solid var(--line);display:flex;align-items:center;justify-content:space-between;gap:10px;background:linear-gradient(180deg,#fff,#f8fafc)}
    .modal-h strong{font-size:14px}
    .xbtn{border:none;width:38px;height:38px;border-radius:12px;cursor:pointer;background:#f1f5f9;border:1px solid var(--line);font-weight:1000}
    .modal-b{padding:16px}
    .alert{background:var(--dangerBg);border:1px solid var(--dangerLine);color:var(--dangerText);padding:12px;border-radius:14px;font-size:13px;line-height:1.5}
    .meta{margin-top:10px;font-size:12px;color:var(--muted);display:grid;gap:6px}
    .kvs{display:flex;justify-content:space-between;gap:10px}
    .kvs b{color:var(--text)}
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sb-brand">
        <div class="sb-logo">PS</div>
        <div>
          <div class="sb-title">Cms Partner Portal</div>
          <div class="sb-sub">Secure Access</div>
        </div>
      </div>

      <div class="sb-block">
        <h4>Navigation</h4>
        <button class="sb-link" data-go="dashboard">Dashboard <span>›</span></button>
        <button class="sb-link" data-go="profile">Profile / প্রোফাইল <span>›</span></button>
        <button class="sb-link" data-go="support">Helpdesk / সহায়তা <span>›</span></button>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <header class="topbar">
        <div class="crumb">
          <div class="path" id="crumbPath">Cms Partner Portal / Authentication</div>
          <div class="title" id="crumbTitle">Authentication</div>
        </div>
        <div class="top-actions">
          <div class="pill" id="sessionPill">Session: Not Logged In</div>
          <button class="btn btn-danger" id="logoutBtn" style="display:none">Logout</button>
        </div>
      </header>

      <section class="content">
        <!-- AUTH VIEW -->
        <div class="view active" id="viewAuth">
          <div class="card">
            <div class="card-h">
              <div>
                <h3>Authentication</h3>
                <p>Login / Register</p>
              </div>
              <div class="tabs">
                <button class="tab active" id="tabLogin">Login</button>
                <button class="tab" id="tabRegister">Register</button>
              </div>
            </div>
            <div class="card-b">
              <div id="loginView">
                <div class="form">
                  <div class="row">
                    <div>
                      <label>User ID</label>
                      <input id="loginUser" placeholder="Cms-porta.pp" autocomplete="username"/>
                    </div>
                    <div>
                      <label>Password</label>
                      <input id="loginPass" type="password" placeholder="••••••••" autocomplete="current-password"/>
                    </div>
                  </div>
                  <button class="btn btn-primary" id="loginBtn">Login</button>
                  <div id="loginErr" style="display:none;color:#b42318;font-size:12px;font-weight:900"></div>
                </div>
              </div>

              <div id="registerView" style="display:none">
                <div class="form">
                  <div class="row">
                    <div>
                      <label>Full Name / নাম</label>
                      <input id="regName" placeholder="Full name" autocomplete="name"/>
                    </div>
                    <div>
                      <label>Mobile / মোবাইল</label>
                      <input id="regMobile" placeholder="01XXXXXXXXX" autocomplete="tel"/>
                    </div>
                  </div>

                  <div class="row">
                    <div>
                      <label>User ID</label>
                      <input id="regUser" placeholder="Choose user id" autocomplete="username"/>
                    </div>
                    <div>
                      <label>সদস্য</label>
                      <select id="regRole">
                        <option value="Partner">User</option>
                        <option value="Support">Support</option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <div>
                      <label>Password</label>
                      <input id="regPass" type="password" placeholder="Create password" autocomplete="new-password"/>
                    </div>
                    <div>
                      <label>Confirm</label>
                      <input id="regPass2" type="password" placeholder="Confirm" autocomplete="new-password"/>
                    </div>
                  </div>

                  <button class="btn btn-primary" id="registerBtn">Create Account</button>
                  <div id="regErr" style="display:none;color:#b42318;font-size:12px;font-weight:900"></div>
                  <div id="regOk" style="display:none;color:#0f5b2f;font-size:12px;font-weight:900"></div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- DASHBOARD (ONLY 3 MAIN SERVICES) -->
        <div class="view" id="viewDash">
          <div class="card">
            <div class="card-h">
              <div>
                <h3>Dashboard</h3>
                <p id="welcomeLine">—</p>
              </div>
            </div>
            <div class="card-b">
              <div class="tiles">
                <div class="tile">
                  <div class="tile-top">
                    <div>
                      <p class="tile-title">NID Server CMS Portal</p>
                      <div class="tile-sub">এনআইডি সার্ভিস</div>
                    </div>
                    <div class="chip">01</div>
                  </div>
                  <div class="tile-body">
                    <div class="menu">
                      <button data-open-module="nid">Open <span class="chev">›</span></button>
                    </div>
                  </div>
                </div>

                <div class="tile">
                  <div class="tile-top">
                    <div>
                      <p class="tile-title">Mobile Database Portal</p>
                      <div class="tile-sub">মোবাইল ডাটাবেস</div>
                    </div>
                    <div class="chip">02</div>
                  </div>
                  <div class="tile-body">
                    <div class="menu">
                      <button data-open-module="mobile">Open <span class="chev">›</span></button>
                    </div>
                  </div>
                </div>

                <div class="tile">
                  <div class="tile-top">
                    <div>
                      <p class="tile-title">Birth & Death Registration (BDRC)</p>
                      <div class="tile-sub">জন্ম/মৃত্যু নিবন্ধন</div>
                    </div>
                    <div class="chip">03</div>
                  </div>
                  <div class="tile-body">
                    <div class="menu">
                      <button data-open-module="bdrc">Open <span class="chev">›</span></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- MODULE: NID -->
        <div class="view" id="viewNID">
          <div class="pagebar">
            <div class="left">
              <b>NID Server CMS Portal</b>
              <small>Nid CMS<small>
            </div>
            <div class="right">
              <button class="btn btn-outline" data-back="dashboard">Back</button>
            </div>
          </div>

          <div class="card" style="margin-top:12px">
            <div class="card-h">
              <div>
                <h3>Options</h3>
                <p>সেবা নির্বাচন করুন</p>
              </div>
            </div>
            <div class="card-b">
              <div class="tabs">
                <button class="tab active" data-tab="nid1">NID Search</button>
                <button class="tab" data-tab="nid2">Voter List</button>
                <button class="tab" data-tab="nid3">Search by Info</button>
                <button class="tab" data-tab="nid4">Category</button>
                <button class="tab" data-tab="nid5">Approval</button>
              </div>

              <div class="card" style="margin-top:12px" id="nid1">
                <div class="card-h"><div><h3>NID Number Search</h3><p>এনআইডি নাম্বার</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div>
                        <label>NID Number / এনআইডি</label>
                        <input placeholder="Enter NID Number" />
                      </div>
                      <div>
                        <label>Search Type</label>
                        <select>
                          <option>Standard</option>
                          <option>Verification</option>
                          <option>Record Check</option>
                        </select>
                      </div>
                    </div>
                    <button class="btn btn-primary" data-action="NID Search">Search</button>
                  </div>
                </div>
              </div>

              <div class="card" style="margin-top:12px; display:none" id="nid2">
                <div class="card-h"><div><h3>Voter List</h3><p>জেলা নির্বাচন</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div>
                        <label>District / জেলা</label>
                        <select id="districtSelect"></select>
                      </div>
                      <div>
                        <label>Format</label>
                        <select><option>PDF</option><option>CSV</option><option>Print</option></select>
                      </div>
                    </div>
                    <button class="btn btn-primary" data-action="Voter List Download">Download</button>
                  </div>
                </div>
              </div>

              <div class="card" style="margin-top:12px; display:none" id="nid3">
                <div class="card-h"><div><h3>Search by Information</h3><p>তথ্য দিয়ে খোঁজা</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div>
                      <label>Criteria / অপশন</label>
                      <select>
                        <option>Voter Name / নাম</option>
                        <option>Address / ঠিকানা</option>
                        <option>Birth Registration No / জন্ম নিবন্ধন</option>
                        <option>Mobile Number / মোবাইল</option>
                        <option>Father NID / পিতার এনআইডি</option>
                        <option>Mother NID / মাতার এনআইডি</option>
                      </select>
                    </div>
                    <div class="row">
                      <div>
                        <label>District / জেলা</label>
                        <select id="nidDistrict"></select>
                      </div>
                      <div>
                        <label>Upazila / উপজেলা</label>
                        <input placeholder="Upazila" />
                      </div>
                    </div>
                    <div class="row">
                      <div>
                        <label>Village / গ্রাম</label>
                        <input placeholder="Village" />
                      </div>
                      <div>
                        <label>Value / তথ্য</label>
                        <input placeholder="Type here…" />
                      </div>
                    </div>
                    <div class="row">
                      <button class="btn btn-outline" type="button" data-action="NID Card View">NID Card View</button>
                      <button class="btn btn-primary" type="button" data-action="Search by Info">Search</button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card" style="margin-top:12px; display:none" id="nid4">
                <div class="card-h"><div><h3>Category Check</h3><p>ক্যাটাগরি যাচাই</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div>
                        <label>Category</label>
                        <select><option>Approved</option><option>Pending</option><option>Rejected</option></select>
                      </div>
                      <div>
                        <label>NID / এনআইডি</label>
                        <input placeholder="Enter NID Number" />
                      </div>
                    </div>
                    <button class="btn btn-primary" data-action="Category Check">Check</button>
                  </div>
                </div>
              </div>

              <div class="card" style="margin-top:12px; display:none" id="nid5">
                <div class="card-h"><div><h3>Correction Approval</h3><p>সংশোধন অনুমোদন</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div><label>Request ID</label><input placeholder="NIDCA-2026-000123" /></div>
                      <div>
                        <label>Decision</label>
                        <select><option>Approve / অনুমোদন</option><option>Reject / বাতিল</option><option>Need Review</option></select>
                      </div>
                    </div>
                    <div><label>Remarks / মন্তব্য</label><textarea placeholder="Write remarks…"></textarea></div>
                    <button class="btn btn-primary" data-action="Approval Submit">Submit</button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- MODULE: MOBILE -->
        <div class="view" id="viewMobile">
          <div class="pagebar">
            <div class="left">
              <b>Mobile Database Portal</b>
              <small>মোবাইল অপারেশন</small>
            </div>
            <div class="right">
              <button class="btn btn-outline" data-back="dashboard">Back</button>
            </div>
          </div>

          <div class="card" style="margin-top:12px">
            <div class="card-h"><div><h3>Options</h3><p>সেবা নির্বাচন করুন</p></div></div>
            <div class="card-b">
              <div class="tabs">
                <button class="tab active" data-tab="m1">Info</button>
                <button class="tab" data-tab="m2">Location</button>
                <button class="tab" data-tab="m3">CDR</button>
              </div>

              <div class="card" style="margin-top:12px" id="m1">
                <div class="card-h"><div><h3>Mobile Info</h3><p>মোবাইল নম্বর</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div><label>Mobile / মোবাইল</label><input placeholder="01XXXXXXXXX" /></div>
                      <div><label>Lookup</label><select><option>Basic</option><option>Enhanced</option><option>Verification</option></select></div>
                    </div>
                    <button class="btn btn-primary" data-action="Mobile Info Search">Search</button>
                  </div>
                </div>
              </div>

              <div class="card" style="margin-top:12px; display:none" id="m2">
                <div class="card-h"><div><h3>Location</h3><p>লোকেশন ট্র্যাক</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div><label>Mobile</label><input placeholder="01XXXXXXXXX" /></div>
                      <div><label>Range</label><select><option>Last Known</option><option>24 Hours</option><option>Custom</option></select></div>
                    </div>
                    <button class="btn btn-primary" data-action="Location Request">Request</button>
                  </div>
                </div>
              </div>

              <div class="card" style="margin-top:12px; display:none" id="m3">
                <div class="card-h"><div><h3>CDR</h3><p>সিডিআর</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div><label>Mobile</label><input placeholder="01XXXXXXXXX" /></div>
                      <div><label>Period</label><select><option>7 Days</option><option>30 Days</option><option>90 Days</option></select></div>
                    </div>
                    <button class="btn btn-primary" data-action="CDR Download">Download</button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- MODULE: BDRC -->
        <div class="view" id="viewBDRC">
          <div class="pagebar">
            <div class="left">
              <b>Birth & Death Registration (BDRC)</b>
              <small>জন্ম/মৃত্যু অপারেশন</small>
            </div>
            <div class="right">
              <button class="btn btn-outline" data-back="dashboard">Back</button>
            </div>
          </div>

          <div class="card" style="margin-top:12px">
            <div class="card-h"><div><h3>Options</h3><p>সেবা নির্বাচন করুন</p></div></div>
            <div class="card-b">
              <div class="tabs">
                <button class="tab active" data-tab="b1">Approval</button>
                <button class="tab" data-tab="b2">New</button>
                <button class="tab" data-tab="b3">Search</button>
              </div>

              <div class="card" style="margin-top:12px" id="b1">
                <div class="card-h"><div><h3>Correction Approval</h3><p>সংশোধন অনুমোদন</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div><label>Application ID</label><input placeholder="BR-2026-000456" /></div>
                      <div><label>Decision</label><select><option>Approve / অনুমোদন</option><option>Reject / বাতিল</option><option>Need Review</option></select></div>
                    </div>
                    <button class="btn btn-primary" data-action="BDRC Approval Submit">Submit</button>
                  </div>
                </div>
              </div>

              <div class="card" style="margin-top:12px; display:none" id="b2">
                <div class="card-h"><div><h3>New Registration</h3><p>নতুন জন্ম নিবন্ধন</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div class="row">
                      <div><label>Child Name / শিশুর নাম</label><input placeholder="Name" /></div>
                      <div><label>Date of Birth</label><input type="date" /></div>
                    </div>
                    <div class="row">
                      <div><label>Father NID / পিতা</label><input placeholder="NID" /></div>
                      <div><label>Mother NID / মাতা</label><input placeholder="NID" /></div>
                    </div>
                    <button class="btn btn-primary" data-action="New Registration Submit">Submit</button>
                  </div>
                </div>
              </div>

              <div class="card" style="margin-top:12px; display:none" id="b3">
                <div class="card-h"><div><h3>Search</h3><p>তথ্য দিয়ে খোঁজা</p></div></div>
                <div class="card-b">
                  <div class="form">
                    <div>
                      <label>Criteria / অপশন</label>
                      <select>
                        <option>Mobile Number / মোবাইল</option>
                        <option>NID Number / এনআইডি</option>
                        <option>Father Birth Reg No / পিতার জন্ম নিবন্ধন</option>
                        <option>Father NID / পিতার এনআইডি</option>
                        <option>Mother Birth Reg No / মাতার জন্ম নিবন্ধন</option>
                        <option>Mother NID / মাতার এনআইডি</option>
                        <option>Sibling Birth Reg No / ভাই/বোন</option>
                      </select>
                    </div>
                    <div class="row">
                      <div><label>Value / তথ্য</label><input placeholder="Type here…" /></div>
                      <div><label>Mode</label><select><option>Standard</option><option>Strict</option><option>Extended</option></select></div>
                    </div>
                    <button class="btn btn-primary" data-action="BDRC Search">Search</button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- PROFILE -->
        <div class="view" id="viewProfile">
          <div class="pagebar">
            <div class="left"><b>Profile / প্রোফাইল</b><small id="profileText">—</small></div>
            <div class="right"><button class="btn btn-outline" data-back="dashboard">Back</button></div>
          </div>
        </div>

        <!-- HELPDESK -->
        <div class="view" id="viewSupport">
          <div class="pagebar">
            <div class="left"><b>Helpdesk / সহায়তা</b><small>Support Request</small></div>
            <div class="right"><button class="btn btn-outline" data-back="dashboard">Back</button></div>
          </div>
          <div class="card" style="margin-top:12px">
            <div class="card-h"><div><h3>Request</h3><p>টিকেট জমা দিন</p></div></div>
            <div class="card-b">
              <div class="form">
                <div class="row">
                  <div><label>Subject / বিষয়</label><input placeholder="Subject" /></div>
                  <div><label>Priority</label><select><option>Normal</option><option>High</option><option>Urgent</option></select></div>
                </div>
                <div><label>Message / বার্তা</label><textarea placeholder="Write message…"></textarea></div>
                <button class="btn btn-primary" data-action="Support Ticket Submit">Submit</button>
              </div>
            </div>
          </div>
        </div>

      </section>
    </main>
  </div>

  <!-- Notice Modal -->
  <div class="modal-bg" id="modalBg">
    <div class="modal">
      <div class="modal-h">
        <strong>Notice</strong>
        <button class="xbtn" id="modalClose">✕</button>
      </div>
      <div class="modal-b">
        <div class="alert">দুঃখিত, পোর্টাল এক্সেস সমস্যা হয়েছে। অনুগ্রহ করে পরে চেষ্টা করুন।</div>
        <div class="meta">
          <div class="kvs"><span>Action</span> <b id="modalAction">—</b></div>
          <div class="kvs"><span>Time</span> <b id="modalTime">—</b></div>
        </div>
      </div>
    </div>
  </div>

<script>
  const LS_USERS = "psp_users_clean_v3";
  const LS_SESSION = "psp_session_clean_v3";
  const $ = (id)=>document.getElementById(id);

  const districts = [
    "Bagerhat","Bandarban","Barguna","Barishal","Bhola","Bogura","Brahmanbaria","Chandpur","Chattogram","Chuadanga",
    "Cox's Bazar","Cumilla","Dhaka","Dinajpur","Faridpur","Feni","Gaibandha","Gazipur","Gopalganj","Habiganj",
    "Jamalpur","Jashore","Jhalokati","Jhenaidah","Joypurhat","Khagrachhari","Khulna","Kishoreganj","Kurigram","Kushtia",
    "Lakshmipur","Lalmonirhat","Madaripur","Magura","Manikganj","Meherpur","Moulvibazar","Munshiganj","Mymensingh",
    "Naogaon","Narail","Narayanganj","Narsingdi","Natore","Netrokona","Nilphamari","Noakhali","Pabna","Panchagarh",
    "Patuakhali","Pirojpur","Rajbari","Rajshahi","Rangamati","Rangpur","Satkhira","Shariatpur","Sherpur","Sirajganj",
    "Sunamganj","Sylhet","Tangail","Thakurgaon"
  ];

  function getUsers(){ try { return JSON.parse(localStorage.getItem(LS_USERS) || "{}"); } catch(e){ return {}; } }
  function setUsers(obj){ localStorage.setItem(LS_USERS, JSON.stringify(obj)); }
  function setSession(s){ localStorage.setItem(LS_SESSION, JSON.stringify(s)); }
  function getSession(){ try { return JSON.parse(localStorage.getItem(LS_SESSION) || "null"); } catch(e){ return null; } }
  function clearSession(){ localStorage.removeItem(LS_SESSION); }

  function showError(id, msg){
    const el = $(id);
    el.textContent = msg;
    el.style.display = "block";
  }
  function hideError(id){
    const el = $(id);
    el.textContent = "";
    el.style.display = "none";
  }

  function setTab(mode){
    hideError("loginErr"); hideError("regErr");
    $("regOk").style.display="none";

    if(mode==="login"){
      $("tabLogin").classList.add("active");
      $("tabRegister").classList.remove("active");
      $("loginView").style.display="block";
      $("registerView").style.display="none";
    }else{
      $("tabRegister").classList.add("active");
      $("tabLogin").classList.remove("active");
      $("registerView").style.display="block";
      $("loginView").style.display="none";
    }
  }
  $("tabLogin").addEventListener("click", ()=>setTab("login"));
  $("tabRegister").addEventListener("click", ()=>setTab("register"));

  $("registerBtn").addEventListener("click", ()=>{
    hideError("regErr"); $("regOk").style.display="none";

    const name=$("regName").value.trim();
    const mobile=$("regMobile").value.trim();
    const user=$("regUser").value.trim();
    const role=$("regRole").value;
    const p1=$("regPass").value;
    const p2=$("regPass2").value;

    if(!name||!mobile||!user||!p1||!p2) return showError("regErr","সব ঘর পূরণ করুন।");
    if(p1.length<4) return showError("regErr","Password কমপক্ষে ৪ অক্ষর হতে হবে।");
    if(p1!==p2) return showError("regErr","Confirm মিলেনি।");

    const users=getUsers();
    if(users[user]) return showError("regErr","User ID ইতিমধ্যে আছে।");

    users[user]={name,mobile,role,pass:btoa(unescape(encodeURIComponent(p1)))};
    setUsers(users);

    $("regOk").textContent="Account created.";
    $("regOk").style.display="block";

    setTimeout(()=>{ setTab("login"); $("loginUser").value=user; $("loginPass").focus(); }, 250);
  });

  $("loginBtn").addEventListener("click", ()=>{
    hideError("loginErr");
    const user=$("loginUser").value.trim();
    const pass=$("loginPass").value;

    if(!user||!pass) return showError("loginErr","User ID এবং Password দিন।");

    const users=getUsers();
    if(!users[user]) return showError("loginErr","Invalid credentials.");
    const stored=users[user].pass;
    const incoming=btoa(unescape(encodeURIComponent(pass)));
    if(stored!==incoming) return showError("loginErr","Invalid credentials.");

    setSession({user,name:users[user].name,role:users[user].role});
    render();
  });

  $("logoutBtn").addEventListener("click", ()=>{ clearSession(); render(); });

  function showView(viewId, path, title){
    document.querySelectorAll(".view").forEach(v=>v.classList.remove("active"));
    $(viewId).classList.add("active");
    $("crumbPath").textContent = path;
    $("crumbTitle").textContent = title;
  }

  function fillDistricts(){
    const a = $("districtSelect");
    const b = $("nidDistrict");
    if(a) a.innerHTML = districts.map(d=>`<option>${d}</option>`).join("");
    if(b) b.innerHTML = districts.map(d=>`<option>${d}</option>`).join("");
  }

  // dashboard open module
  document.addEventListener("click",(e)=>{
    const btn=e.target.closest("[data-open-module]");
    if(!btn) return;
    const mod=btn.getAttribute("data-open-module");
    if(mod==="nid") showView("viewNID","Partner Portal / NID","NID");
    if(mod==="mobile") showView("viewMobile","Partner Portal / Mobile","Mobile");
    if(mod==="bdrc") showView("viewBDRC","Partner Portal / BDRC","BDRC");
  });

  // back buttons
  document.addEventListener("click",(e)=>{
    const b=e.target.closest("[data-back]");
    if(!b) return;
    showView("viewDash","Partner Portal / Dashboard","Dashboard");
  });

  // sidebar go
  document.addEventListener("click",(e)=>{
    const go=e.target.closest("[data-go]");
    if(!go) return;
    const t=go.getAttribute("data-go");
    if(t==="dashboard") showView("viewDash","Partner Portal / Dashboard","Dashboard");
    if(t==="profile") showView("viewProfile","Partner Portal / Profile","Profile");
    if(t==="support") showView("viewSupport","Partner Portal / Helpdesk","Helpdesk");
    const s=getSession();
    if(s) $("profileText").textContent = `${s.user} • ${s.name} • ${s.role}`;
  });

  // module tabs
  document.addEventListener("click",(e)=>{
    const t=e.target.closest(".tab[data-tab]");
    if(!t) return;

    const parent = t.closest(".card-b");
    parent.querySelectorAll(".tab[data-tab]").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");

    const id = t.getAttribute("data-tab");
    const panels = ["nid1","nid2","nid3","nid4","nid5","m1","m2","m3","b1","b2","b3"];
    panels.forEach(pid=>{
      const el = document.getElementById(pid);
      if(!el) return;
      if(el.closest(".view") !== t.closest(".view")) return;
      el.style.display = (pid === id) ? "block" : "none";
    });
  });

  // NOTICE: only on action buttons
  function openNotice(actionText){
    $("modalAction").textContent = actionText;
    $("modalTime").textContent = new Date().toLocaleString();
    $("modalBg").style.display="flex";
  }
  function closeNotice(){ $("modalBg").style.display="none"; }
  $("modalClose").addEventListener("click", closeNotice);
  $("modalBg").addEventListener("click",(e)=>{ if(e.target===$("modalBg")) closeNotice(); });

  document.addEventListener("click",(e)=>{
    const act=e.target.closest("[data-action]");
    if(!act) return;
    openNotice(act.getAttribute("data-action"));
  });

  function render(){
    const s=getSession();
    if(!s){
      $("logoutBtn").style.display="none";
      $("sessionPill").textContent="Session: Not Logged In";
      showView("viewAuth","Partner Portal / Authentication","Authentication");
      return;
    }
    $("logoutBtn").style.display="inline-block";
    $("sessionPill").textContent = `Session: ${s.user} • ${s.role}`;
    $("welcomeLine").innerHTML = `${s.name} (${s.role})`;
    fillDistricts();
    showView("viewDash","Partner Portal / Dashboard","Dashboard");
  }

  render();
</script>
</body>
</html>
